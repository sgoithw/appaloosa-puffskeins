{"version":3,"file":"commonHelpers2.js","sources":["../src/js/subscribeForm.js","../src/js/mainFilters.js","../src/js/scroll-to-top.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { api } from './api';\n//import { loader } from './loader';\n\nconst elements = {\n  subscribeForm: document.querySelector('#subscribe-form'),\n};\n\nelements.subscribeForm.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const email = elements.subscribeForm.email.value.trim();\n  const emailPattern = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n\n  if (!emailPattern.test(email)) {\n    iziToast.show({\n      position: 'center',\n      timeout: 5000,\n      color: 'red',\n      message: `Please enter valid email`,\n    });\n    return;\n  } else {\n    elements.subscribeForm.reset();\n  }\n\n  //loader.create();\n\n  api\n    .createSubscription({\n      email,\n    })\n    .then(response => {\n      const respMessage = response.message;\n      iziToast.show({\n        position: 'center',\n        color: 'white',\n        message: respMessage.replace(/([^\\w!]) /g, '$1<br>'),\n      });\n    })\n    .catch(err => {\n      iziToast.show({\n        position: 'center',\n        messageColor: 'red',\n        color: 'white',\n        message: err.message,\n      });\n    })\n    .finally(() => {\n      //loader.destroy();\n    });\n}\n","import { api } from './api';\nimport { exerciseUI, ExerciseUI } from './ui';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst exerciseFilters = {\n  muscles: '', bodypart: '', equipment: '', keyword: '', page: 1, limit: 10,\n};\n\nconst filtersMap = {\n  Muscles: 'muscles', 'Body parts': 'bodypart', Equipment: 'equipment',\n};\n\nconst exerciseContainer = document.querySelector('.exercises-cards-list');\nconst paginationContainer = document.querySelector('.exs-pagination');\nconst searchInput = document.querySelector('.filter-search');\nconst searchForm = document.querySelector('.search-form');\nconst filterClearIcon = document.querySelector('.filter-clear-icon');\nconst jsBreadcrumbsTitleLink = document.querySelector('.js-breadcrumbs-title-link');\nconst breadcrumbs = document.querySelector('#breadcrumbs');\n\nsearchInput.addEventListener('change', onSearchChange);\nsearchForm.addEventListener('submit', onSearchSubmit);\njsBreadcrumbsTitleLink.addEventListener('click', returnBack);\nbreadcrumbs.addEventListener('click', e => e.preventDefault());\nfilterClearIcon.addEventListener(\"click\",()=>{searchForm.reset()})\n\n// Відрендерити сторінку з категоріями\nfunction returnBack(e) {\n  e.preventDefault();\n  updateExerciseListAndPagination(currentFilter);\n}\n\n// Фільтрація вправ юзером через введення в інпут\nfunction onSearchChange(e) {\n  exerciseFilters.keyword = e.target.value;\n}\n\nfunction onSearchSubmit(e) {\n  e.preventDefault();\n  displayExercises();\n  searchForm.reset();\n}\n\n// Функція для виводу помилки при завантаженні даних із сервера\nfunction showNoResultsMessage() {\n  iziToast.error({\n    title: 'Повідомлення:',\n    message: 'Помилка отримання вправ. Спробуйте ще.',\n    position: 'topCenter',\n    color: 'white',\n    timeout: 5000,\n  });\n}\n\nlet currentFilter = 'Muscles'; // фільтр за замовчуванням\n\n// Функція для оновлення відображення списку вправ та пагінації\nasync function updateExerciseListAndPagination(filter, page = 1) {\n  try {\n    //Показуємо плейсхолдери\n    removeListeners();\n    showCategoryPlaceholders();\n    breadcrumbs.classList.add('hidden');\n    paginationContainer.innerHTML = '';\n    jsBreadcrumbsTitleLink.innerHTML = `<h2 class='title'>Exercises</h2>`;\n    // Отримання даних вправ за вказаним фільтром та сторінкою\n    const data = await api.filters({ filter, page, limit: 12 });\n    const exercises = data.results;\n    searchForm.style.display = 'none';\n    // Оновлення списку вправ\n    exerciseContainer.innerHTML = exerciseUI.getExerciseCategoryListHTML(exercises);\n\n    // Оновлення пагінації\n    const totalPages = data.totalPages;\n    paginationContainer.innerHTML = exerciseUI.getPaginationHTML(totalPages, page);\n    listenClick();\n  } catch (error) {\n    showNoResultsMessage();\n    clearPlaceholders();\n    console.error('Error fetching exercises:', error);\n  }\n}\n\n// Завантаження списку вправ та пагінації за замовчуванням (\"Muscles\", сторінка 1)\nupdateExerciseListAndPagination(currentFilter);\n\nfunction onExercisePageClick(event) {\n  if (event.target.tagName === 'A') {\n    const nextPage = parseInt(event.target.dataset.page);\n    if (!isNaN(nextPage)) {\n      const activeItem = document.querySelector('.exs-pagination-item.active');\n      const currentPage = parseInt(activeItem.textContent);\n      if (currentPage !== nextPage) {\n        // Оновлення списку вправ та пагінації для нової сторінки\n        updateExerciseListAndPagination(currentFilter, nextPage);\n\n        // Позначення активного елемента пагінації\n        // activeItem.classList.remove('active');\n        // event.target.parentElement.classList.add('active');\n      }\n    }\n  }\n}\n\n// Додаємо обробники подій для фільтрів\nconst filterItems = document.querySelectorAll('.exercises-item');\nfilterItems.forEach(item => {\n  item.addEventListener('click', function() {\n    filterItems.forEach(item => item.classList.remove('active'));\n    this.classList.add('active');\n    currentFilter = this.textContent; // Оновлюємо поточний фільтр\n    // Скидання сторінки на першу при зміні фільтра\n    updateExerciseListAndPagination(currentFilter);\n  });\n});\n\n// видаляемо слухач на момент загрузки\nfunction removeListeners() {\n  paginationContainer.removeEventListener('click', onExercisePageClick);\n}\n\n// накладаємо прослуховувачі подій до карток категорій\nfunction listenClick() {\n  const items = document.querySelectorAll('.exs-card-item');\n  items.forEach(item => item.addEventListener('click', handlerClickExercises));\n  // Додаємо обробник подій для пагінації\n  paginationContainer.addEventListener('click', onExercisePageClick);\n}\n\n// Функція виводу вправ в задежності від обраної користувачем категорії\nfunction handlerClickExercises(e) {\n  exerciseFilters.muscles = '';\n  exerciseFilters.bodypart = '';\n  exerciseFilters.equipment = '';\n  exerciseFilters.page = 1;\n  exerciseFilters[filtersMap[currentFilter]] = e.currentTarget.dataset.name;\n  showBreadcrumbs(e.currentTarget.dataset.name);\n  displayExercises();\n}\n\n/**\n * Show breadcrumbs\n * @param val\n */\nfunction showBreadcrumbs(val) {\n\n  jsBreadcrumbsTitleLink.innerHTML = `<h2 class='title'>Exercises /</h2>`;\n  breadcrumbs.classList.remove('hidden');\n  breadcrumbs.innerHTML = `<h3 class='subtitle'>${val.charAt(0).toUpperCase()}${val.slice(1)}</h3>`;\n\n}\n\n// Функція для відмальовування списку вправ у HTML\nfunction renderExerciseList(exercises) {\n  const exerciseListElement = document.querySelector('.exercises-cards-list');\n\n  // Очистка списку перед додаванням нових елементів\n  exerciseListElement.innerHTML = '';\n\n  // Отримання типу вправ для визначення особливостей карти вправ\n  const cardType = ExerciseUI.exerciseCardType.HOME;\n\n  // Отримання HTML-представлення списку вправ з класу ExerciseUI\n  const exerciseListHTML = exerciseUI.getExerciseListHTML(exercises.results, cardType);\n\n  // Додавання HTML-представлення вправ до списку на сторінці\n  exerciseListElement.innerHTML = exerciseListHTML;\n  const paginationLinks = document.querySelectorAll('.exs-pagination-link');\n  paginationLinks.forEach(link => link.addEventListener('click', onPageClick));\n  searchForm.style.display = 'flex';\n}\n\nfunction onPageClick(e) {\n  e.preventDefault();\n  exerciseFilters.page = e.currentTarget.dataset.page;\n  displayExercises();\n}\n\n// Отримання вправ з API та відображення їх на сторінці\nfunction displayExercises() {\n  //Показуєм контент плейсхолдери\n  removeListeners();\n  showCardPlaceholders();\n  paginationContainer.innerHTML = '';\n  // Отримання вправ з API\n  api\n    .exercises(exerciseFilters)\n    .then(exercises => {\n      if (exercises.results.length === 0) {\n        // Показуємо повідомлення про відсутність вправ\n        iziToast.show({\n          title: 'Повідомлення',\n          message: 'Такої вправи не існує. Спробуйте ще.',\n          position: 'topCenter',\n          timeout: 5000,\n          color: 'black',\n        });\n        clearPlaceholders();\n        return;\n      }\n      // Відображення вправ на сторінці\n      paginationContainer.innerHTML = exerciseUI.getPaginationHTML(exercises.totalPages, exerciseFilters.page, exerciseFilters.limit);\n      renderExerciseList(exercises);\n    })\n    .catch(error => {\n      showNoResultsMessage();\n      clearPlaceholders();\n      console.error('Помилка отримання вправ:', error);\n    });\n}\n\n/**\n * Show content placeholders\n */\nfunction showCategoryPlaceholders() {\n\n  exerciseContainer.innerHTML = getCategoryPlaceholdersHTML(9);\n\n}\n\n/**\n * Show content placeholders\n */\nfunction showCardPlaceholders() {\n\n  exerciseContainer.innerHTML = getCardPlaceholderHTML(10);\n\n}\n\nfunction clearPlaceholders() {\n  exerciseContainer.innerHTML = '';\n}\n\n/**\n * Returns Category placeholder\n * li html\n * @param count\n * @returns {string}\n */\nfunction getCategoryPlaceholdersHTML(count) {\n  let html = '';\n\n  for (const i = count; count > 0; count--) {\n\n    html += `<li class='exs-card-item exs-card-item-loader' data-name='levator scapulae'>\n              <div class='exs-card-img'></div>\n              <div class='exs-card-container'>\n                <h3 class='exs-card-title'><span class='content-placeholder' style='width:80px;'>&nbsp;</span></h3>\n                <p class='exs-card-description'><span class='content-placeholder' style='width:60px;'>&nbsp;</span></p>\n              </div>\n            </li>`;\n\n  }\n\n  return html;\n}\n\n/**\n * Returns cards placeholders\n * @param count\n */\nfunction getCardPlaceholderHTML(count) {\n\n  let html = '';\n\n  for (const i = count; count > 0; count--) {\n    html += `<li class='exercise' >\n          <button class='main-action-btn card__btn' type='button'>\n            Start\n            <svg class='main-action-arrow-icon' width='16' height='16'>\n              <use href='/img/icons.svg#icon-arrow-right'></use>\n            </svg>\n          </button>\n          <div class='top'>\n            <span class='badge'>Workout</span>\n\n            <div class='rating'>\n              <span class='rating-value'><span class='content-placeholder' style='width:10px;'>&nbsp;</span></span>\n              <svg class='rating-icon' width='18' height='18'>\n                <use href='/img/icons.svg#icon-star'></use>\n              </svg>\n            </div>\n          </div>\n          <div class='title'>\n            <svg class='title-icon' width='14' height='16'>\n              <use href='/img/icons.svg#icon-running-stick-figure-svgrepo-com-1'></use>\n            </svg>\n            <span class='title-text text-clipped content-placeholder' style='width:100%; min-width: 150px'>&nbsp;</span>\n          </div>\n          <div class='details'>\n            <div class='detail'>\n              <span class='detail-title'>Burned calories:</span>\n              <span class='detail-value text-clipped'><span class='content-placeholder' style='width:50px;'>&nbsp;</span></span>\n            </div>\n            <div class='detail'>\n              <span class='detail-title'>Body part:</span>\n              <span class='detail-value text-clipped'><span class='content-placeholder' style='width:50px;'>&nbsp;</span></span>\n            </div>\n            <div class='detail'>\n              <span class='detail-title'>Target:</span>\n              <span class='detail-value text-clipped'><span class='content-placeholder' style='width:50px;'>&nbsp;</span></span>\n            </div>\n          </div>\n        </li>`;\n\n  }\n\n  return html;\n}","const goTopBtn = document.querySelector('.go-to-top');\n\ngoTopBtn.addEventListener('click', goTop);\nwindow.addEventListener('scroll', trackScroll);\n\nfunction trackScroll() {\n  const offset = window.scrollY;\n  const coords = document.documentElement.clientHeight;\n  goTopBtn.classList.toggle('go-to-top--show', offset > coords);\n}\n\nfunction goTop() {\n  if (window.scrollY > 0) {\n    window.scrollBy(0, -75);\n    requestAnimationFrame(goTop);\n  }\n}\n\n\n\n"],"names":["elements","handleSubmit","event","email","iziToast","api","response","respMessage","err","exerciseFilters","filtersMap","exerciseContainer","paginationContainer","searchInput","searchForm","filterClearIcon","jsBreadcrumbsTitleLink","breadcrumbs","onSearchChange","onSearchSubmit","returnBack","updateExerciseListAndPagination","currentFilter","displayExercises","showNoResultsMessage","filter","page","removeListeners","showCategoryPlaceholders","data","exercises","exerciseUI","totalPages","listenClick","error","clearPlaceholders","onExercisePageClick","nextPage","activeItem","filterItems","item","handlerClickExercises","showBreadcrumbs","val","renderExerciseList","exerciseListElement","cardType","ExerciseUI","exerciseListHTML","link","onPageClick","showCardPlaceholders","getCategoryPlaceholdersHTML","getCardPlaceholderHTML","count","html","i","goTopBtn","goTop","trackScroll","offset","coords"],"mappings":"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"}